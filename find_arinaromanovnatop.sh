#!/bin/bash

echo "üîç –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ @arinaromanovnatop –≤ –ª–æ–≥–∞—Ö..."
echo "=================================================="

# –ü–æ–∏—Å–∫ –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ª–æ–≥–∞—Ö
echo "üìã –ü–æ–∏—Å–∫ –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ª–æ–≥–∞—Ö (bot_logs_journalctl.txt):"
echo "--------------------------------------------------"

# –ü–æ–∏—Å–∫ –ø–æ username
echo "üë§ –ü–æ–∏—Å–∫ –ø–æ username 'arinaromanovnatop':"
grep -i "arinaromanovnatop" bot_logs_journalctl.txt | head -10

echo ""
echo "üì± –ü–æ–∏—Å–∫ –ø–æ Telegram ID (–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–µ–Ω):"
echo "–í–≤–µ–¥–∏—Ç–µ Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞):"
read telegram_id

if [ ! -z "$telegram_id" ]; then
    echo "üîç –ü–æ–∏—Å–∫ –ø–æ Telegram ID: $telegram_id"
    grep -i "$telegram_id" bot_logs_journalctl.txt | head -10
fi

echo ""
echo "üìä –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:"
echo "--------------------------------------------------"

# –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
echo "üîç –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π 'arinaromanovnatop':"
grep -i "arinaromanovnatop" bot_logs_journalctl.txt

echo ""
echo "üìã –ü–æ–∏—Å–∫ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–∞—Ö (bot_logs_syslog.txt):"
echo "--------------------------------------------------"
grep -i "arinaromanovnatop" bot_logs_syslog.txt | head -10

echo ""
echo "üéØ –ü–æ–∏—Å–∫ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ JSON (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ):"
echo "--------------------------------------------------"

# –ü–æ–∏—Å–∫ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
grep -A 5 -B 5 "arinaromanovnatop" bot_logs_journalctl.txt | grep -E '("id"|"username"|"first_name"|"last_name"|"is_premium"|"language_code")' | head -20

echo ""
echo "üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:"
echo "--------------------------------------------------"

# –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π
count=$(grep -i "arinaromanovnatop" bot_logs_journalctl.txt | wc -l)
echo "üìä –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π: $count"

# –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
echo "üìÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:"
grep -i "arinaromanovnatop" bot_logs_journalctl.txt | grep -o "^[A-Za-z]\{3\} [0-9]\{1,2\} [0-9]\{2\}:[0-9]\{2\}:[0-9]\{2\}" | sort | uniq | head -10

echo ""
echo "‚úÖ –ü–æ–∏—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!" 